# 项目问题清单与解决方案

当前项目存在的主要问题，并提出了相应的解决方案，希望能帮助我们推进开发。

---

### 问题 1: 游戏界面未适配移动端屏幕

**- 描述:** 目前游戏画面会直接拉伸以适应PC浏览器窗口，没有实现手机屏幕比例的显示效果。在PC上，我们希望游戏核心区域以手机屏幕的纵向比例（如9:16）居中显示，两侧留出黑边。

**- 解决方案:**
我们可以通过CSS来解决这个问题。主要思路是：
1.  **设置主容器样式**: 找到游戏的主容器（例如在 `App.tsx` 中最外层的 `div`）。
2.  **应用CSS规则**: 在 `src/App.css` 中为这个主容器添加以下样式：
    ```css
    .game-container {
      max-width: 450px; /* 或者一个合适的移动端屏幕宽度 */
      aspect-ratio: 9 / 16;
      margin: 0 auto; /* 水平居中 */
      background-color: #000; /* 背景填充黑色 */
      position: relative; /* 用于内部元素的定位 */
      border: 1px solid #333; /* 可选：为了看清边界 */
    }

    body {
      background-color: #000; /* 整个页面背景设为黑色 */
    }
    ```
3.  **应用样式**: 确保在 `App.tsx` 的主容器 `div` 上使用了 `className="game-container"`。

这样，无论屏幕多宽，游戏内容都会被限制在中间一个固定比例的竖屏区域内。

---

### 问题 2: 项目没有使用游戏素材

**- 描述:** 当前游戏界面非常简陋，完全没有使用 `MiniWorldSprites` 目录中提供的像素艺术素材。

**- 解决方案:**
我们需要一个流程来加载并使用这些素材。
1.  **资源准备**:
    *   确认所有需要的游戏素材（图片、精灵图配置等）都已从 `MiniWorldSprites/` 目录复制到 `public/assets/` 目录下。`public` 目录下的文件会在构建时被直接复制到输出目录，方便Web应用直接访问。
    *   你应该已经拥有 `spritesheet_config.json` 文件，它描述了如何从精灵图（Sprite Sheet）中切割出单个的精灵（Sprite）。请确保此文件也在 `public/assets/` 目录中。

2.  **资源加载**:
    *   我们需要在游戏启动时加载这些资源。`src/utils/AssetLoader.ts` 是实现这个功能的最佳位置。
    *   我们可以使用 `@pixi/assets` 模块来加载。首先加载 `spritesheet_config.json` 和所有相关的精灵图图片。
    *   然后，解析JSON文件，根据里面的信息创建 `PIXI.Spritesheet` 实例。这样就可以通过名称（例如 `'grass'` 或 `'player_idle_down_1'`）来获取对应的纹理（Texture）。

3.  **在游戏中使用**:
    *   在创建游戏实体（Entity）时，例如在 `src/entities/index.ts` 或相关的系统（System）中，可以从加载好的资源里获取纹理，并使用 `@pixi/react` 的 `<Sprite />` 组件来渲染它们。

---

### 问题 3: 游戏原型无法运行且玩法不明

**- 描述:** 当前的原型没有实际的游戏循环和交互，不清楚核心玩法是什么。

**- 解决方案:**
这个问题的根源在于缺少一个明确、可执行的“第一版”游戏循环。根据项目结构（`miniplex` for ECS, `Zustand` for state, `Pixi.js` for rendering），我建议我们从最简单的场景开始，分步实现核心玩法。

**第一步：实现一个最小化的“可见”场景**

1.  **渲染地图**:
    *   修改 `GameLoop.tsx` 或创建一个新的 `MapSystem.tsx`。
    *   该系统负责读取一个简单的2D数组作为地图数据（例如 `[['grass', 'grass'], ['water', 'grass']]`）。
    *   遍历数组，并使用从 `AssetLoader` 中获取的地面纹理（如 `'grass'`, `'water'`），在屏幕上渲染出对应的瓦片（Tile）。

2.  **创建并渲染一个NPC**:
    *   在 `src/entities/index.ts` 中创建一个函数，用于生成一个NPC实体。这个实体应包含 `position` 和 `sprite` 组件。
    *   在 `AISystem.tsx` 中，为NPC实现一个简单的随机移动逻辑：每隔一段时间，在上下左右四个方向中随机选择一个进行移动。
    *   在渲染系统中，根据NPC的 `position` 组件更新其在屏幕上的位置。

通过完成这个最小化的场景，我们就有了一个“看得见、会动”的基础原型。在此之上，我们可以逐步迭代，增加玩家控制、交互、敌人、UI等更复杂的玩法。
